<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Sdel</title>
</head>
<body style="background: #000; color: #fff; padding: 20px; font-family: sans-serif;">

    <div style="border: 2px solid #0f0; padding: 10px; margin-bottom: 20px;">
        <strong>Status:</strong> <span id="st">Waiting...</span>
    </div>

    <input type="email" id="em" placeholder="Enter Email" style="width: 100%; padding: 15px; margin-bottom: 10px;">
    
    <button id="bt" style="width: 100%; padding: 20px; background: #FF6600; color: #fff; font-weight: bold; border: none;">
        TAP TO TEST
    </button>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
    const bt = document.getElementById('bt');
    const em = document.getElementById('em');
    const st = document.getElementById('st');

    bt.onclick = async function() {
        const email = em.value.trim();
        if(!email) return alert("Email empty");

        st.innerText = "Connecting...";
        
        try {
            // Using raw fetch with explicit CORS mode
            const response = await fetch('https://crasacrormxxombnaklt.supabase.co/auth/v1/recover', {
                method: 'POST',
                mode: 'cors', // FORCES the browser to allow the cross-site request
                headers: {
                    'Content-Type': 'application/json',
                    'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNyYXNhY3Jvcm14eG9tYm5ha2x0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyNjg1NTAsImV4cCI6MjA3OTg0NDU1MH0.q_apkDBu_QVwebbfjRqZ7QwrsNm9xQysRoNhayNyfLU',
                    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNyYXNhY3Jvcm14eG9tYm5ha2x0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyNjg1NTAsImV4cCI6MjA3OTg0NDU1MH0.q_apkDBu_QVwebbfjRqZ7QwrsNm9xQysRoNhayNyfLU'
                },
                body: JSON.stringify({ email: email })
            });

            if (response.ok) {
                alert("SUCCESS! Check your Zoho mail.");
                st.innerText = "Email Sent!";
            } else {
                const errData = await response.json();
                alert("SUPABASE ERROR: " + (errData.msg || errData.error_description));
                st.innerText = "Supabase rejected the request.";
            }
        } catch (e) {
            alert("FETCH BLOCKED: Your phone or website is stopping the signal. Try using HTTPS or a different Wi-Fi.");
            st.innerText = "Connection Blocked";
        }
    };
    </script>    
</body>
</html>
